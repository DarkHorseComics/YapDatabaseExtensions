default_platform :ios

platform :ios do

  desc "Runs all the tests"
  lane :test do
	xctest scheme: 'YapDatabaseExtensions', 
      sdk: 'iphonesimulator',
      destination: 'platform=iOS Simulator,name=iPhone 6,OS=9.0',
      destination_timeout: 120,
      derivedDataPath: '.fastlane/xcodebuild-data',
      build_settings: { "ENABLED_CODE_COVERAGE" => true }
  end
  
  gcovr(
    html: true,
    html_details: true,
    output: "./code-coverage/report.html"
  )
end
